<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DodoWheels 文档管理系统</title>
<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', Arial, sans-serif;
        background-color: #121212;
        color: #00bfff;
    }

    /* 文件夹整体容器 */
    .folder-block {
        width: 70%;
        margin: 0 auto 25px auto; /* 居中 + 下间距 */
        background: #1c1c1c;
        border: 1px solid #00bfff40;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 15px #00bfff30;
    }

    /* 文件夹标题 */
    .folder-title {
        cursor: pointer;
        padding: 12px 16px;
        background: #0d1a26;
        font-size: 1.1em;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 10px;
        transition: background 0.3s;
    }
    .folder-title:hover {
        background: #12324d;
    }
    .folder-title.expanded {
        background: #0d2a40;
        color: #1e90ff;
    }
    .folder-icon {
        font-weight: bold;
        color: #00bfff;
        font-size: 1.2em;
    }

    /* 文件夹内容 */
    .folder-content {
        display: none;
        padding: 15px 20px;
        border-top: 1px solid #00bfff30;
    }

    /* 文件列表竖向排列 */
    .tools {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    /* 文件卡片 */
    .tool {
        background: #222;
        border: 1px solid #00bfff30;
        border-radius: 10px;
        padding: 12px;
        text-align: center;
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .tool:hover {
        transform: translateY(-3px);
        box-shadow: 0 0 12px #00bfff60;
    }
    .tool h3 {
        color: #00bfff;
        font-size: 1em;
        margin-bottom: 8px;
    }
    .tool button {
        width: 100%;
        padding: 8px;
        border: none;
        border-radius: 5px;
        background: linear-gradient(90deg, #1e90ff, #00bfff);
        color: #fff;
        cursor: pointer;
    }
    .tool button:disabled {
        background: #555;
        cursor: not-allowed;
    }
    .tool span {
        display: block;
        padding: 8px;
        border-radius: 5px;
        background: #444;
        color: #aaa;
    }

    mark {
        background: yellow;
        color: black;
    }
</style>
</head>
<body>
<div id="tabContent"></div>

<script>
// 模拟数据
const files = {
    "Sales": {
        "合同文件": [
            { name: "销售合同 A", path: "files/sales/a.pdf", status: "download" },
            { name: "销售合同 B", path: "files/sales/b.pdf", status: "download" }
        ],
        "报价单": [
            { name: "报价单 2024", path: "files/sales/quote.pdf", status: "download" }
        ]
    }
};

// 渲染函数
function showTab(tabKey) {
    const tabContent = document.getElementById("tabContent");
    tabContent.innerHTML = "";

    const tabData = files[tabKey] || {};

    Object.keys(tabData).forEach(subFolder => {
        const folderBlock = document.createElement("div");
        folderBlock.className = "folder-block";

        const folderTitle = document.createElement("div");
        folderTitle.className = "folder-title";

        const icon = document.createElement("span");
        icon.className = "folder-icon";
        icon.innerText = "+";

        const label = document.createElement("span");
        label.innerText = subFolder;

        folderTitle.appendChild(icon);
        folderTitle.appendChild(label);

        const folderContent = document.createElement("div");
        folderContent.className = "folder-content";

        const toolsDiv = document.createElement("div");
        toolsDiv.className = "tools";

        (tabData[subFolder] || []).forEach(f => {
            const card = document.createElement("div");
            card.className = "tool";

            const title = document.createElement("h3");
            title.innerText = f.name;
            card.appendChild(title);

            if (f.status === "download") {
                const btn = document.createElement("button");
                btn.innerText = "下载";
                btn.disabled = true;

                fetch(f.path, { method: "HEAD" })
                    .then(res => {
                        if (res.ok) {
                            btn.disabled = false;
                            btn.onclick = () => window.open(f.path, "_blank");
                        } else {
                            btn.innerText = "文件缺失";
                        }
                    })
                    .catch(() => {
                        btn.innerText = "文件缺失";
                    });

                card.appendChild(btn);
            } else {
                const span = document.createElement("span");
                span.innerText = f.status;
                card.appendChild(span);
            }

            toolsDiv.appendChild(card);
        });

        folderContent.appendChild(toolsDiv);

        folderTitle.addEventListener("click", () => {
            const expanded = folderContent.style.display === "block";
            folderContent.style.display = expanded ? "none" : "block";
            folderTitle.classList.toggle("expanded", !expanded);
            icon.innerText = expanded ? "+" : "-";
        });

        folderBlock.appendChild(folderTitle);
        folderBlock.appendChild(folderContent);
        tabContent.appendChild(folderBlock);
    });
}

// 测试：渲染 Sales
showTab("Sales");
</script>
</body>
</html>
