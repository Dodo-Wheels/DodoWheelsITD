<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>文件访问（测试用，不安全）</title>
  <style>
    body { font-family: sans-serif; max-width: 720px; margin: 40px auto; }
    label { display:block; margin:8px 0; }
    input { padding:6px; width:100%; box-sizing:border-box; }
    button { padding:8px 12px; margin-top:10px; }
    #fileArea { margin-top:20px; }
    .hidden { display:none; }
  </style>
</head>
<body>
  <h1>文件访问（仅测试用）</h1>

  <div id="loginBox">
    <label>用户名：<input id="username"></label>
    <label>密码：<input id="password" type="password"></label>
    <button id="btnLogin">登录</button>
  </div>

  <div id="fileArea" class="hidden">
    <p>已登录：<strong id="who"></strong>
      <button id="btnLogout">登出</button></p>
    <ul id="filesUl"></ul>
  </div>

  <script>
    // 在这里写用户配置：用户名 -> { 密码, 文件夹, 文件列表 }
    const USERS = {
      "alice": {
        password: "alice123",
        folder: "files/alice",
        files: ["a.txt", "photo.jpg"]
      },
      "bob": {
        password: "bob123",
        folder: "files/bob",
        files: ["b.txt", "report.pdf"]
      }
    };

    const loginBox = document.getElementById("loginBox");
    const fileArea = document.getElementById("fileArea");
    const who = document.getElementById("who");
    const filesUl = document.getElementById("filesUl");

    document.getElementById("btnLogin").addEventListener("click", () => {
      const u = document.getElementById("username").value.trim();
      const p = document.getElementById("password").value;
      const user = USERS[u];
      if (!user || user.password !== p) {
        alert("用户名或密码错误");
        return;
      }
      who.textContent = u;
      filesUl.innerHTML = "";
      user.files.forEach(f => {
        const li = document.createElement("li");
        const a = document.createElement("a");
        a.href = `${user.folder}/${encodeURIComponent(f)}`;
        a.textContent = f;
        a.target = "_blank";
        li.appendChild(a);
        filesUl.appendChild(li);
      });
      loginBox.classList.add("hidden");
      fileArea.classList.remove("hidden");
    });

    document.getElementById("btnLogout").addEventListener("click", () => {
      document.getElementById("username").value = "";
      document.getElementById("password").value = "";
      loginBox.classList.remove("hidden");
      fileArea.classList.add("hidden");
    });
  </script>
</body>
</html>
