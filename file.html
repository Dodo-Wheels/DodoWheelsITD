<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ç§‘æŠ€æ„Ÿæ–‡ä»¶ä¸­å¿ƒ</title>
<style>
body{margin:0;font-family:sans-serif;background:#0a0a0a;color:#fff;}
h1{text-align:center;color:#0ff;text-shadow:0 0 15px #0ff;margin-top:40px;}
#fileArea{max-width:1000px;margin:30px auto;padding:0 20px;}
#filesContainer{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;}
.fileCard{background:#111;border-radius:12px;padding:20px;box-shadow:0 0 10px #00f;display:flex;flex-direction:column;justify-content:space-between;transition:0.3s;}
.fileCard:hover{transform:translateY(-5px);box-shadow:0 0 25px #0ff;}
.fileName{text-align:center;color:#0ff;margin:10px 0;word-break:break-all;}
.fileLink{text-decoration:none;background:linear-gradient(90deg,#00f,#0ff);color:#000;padding:8px;border-radius:6px;text-align:center;font-weight:bold;transition:0.3s;}
.fileLink:hover{background:linear-gradient(90deg,#0ff,#00f);color:#fff;}
.fileIcon{font-size:40px;text-align:center;margin-bottom:10px;}
#logoutBtn{display:inline-block;margin-top:10px;padding:8px 16px;border:none;border-radius:6px;background: linear-gradient(45deg,#0ff,#00f); color:#000;font-weight:bold; cursor:pointer; transition: all 0.3s;}
#logoutBtn:hover{background:linear-gradient(45deg,#00f,#0ff);color:#fff;}
</style>
</head>
<body>
<h1>ç§‘æŠ€æ„Ÿæ–‡ä»¶ä¸­å¿ƒ</h1>

<div id="fileArea">
  <h2>æ¬¢è¿Ž <span id="who"></span></h2>
  <button id="logoutBtn">ç™»å‡º</button>
  <div id="filesContainer"></div>
</div>

<script>
// ---------- ä»Ž sessionStorage èŽ·å–ç”¨æˆ·å ----------
const user = sessionStorage.getItem("user");
if(!user){
  alert("è¯·å…ˆç™»å½•");
  window.location.href="login.html";
}

// ---------- ç”¨æˆ·æ–‡ä»¶é…ç½® ----------
const USERS = {
  "alice":{folder:"files/alice", files:["a.txt","photo.jpg","doc1.pdf"]},
  "bob":{folder:"files/bob", files:["b.txt","report.pdf","image.png"]},
  "carol":{folder:"files/carol", files:["c1.doc","c2.png"]}
};

// ---------- æ–‡ä»¶ç±»åž‹å›¾æ ‡ ----------
const fileIcons = {
  "txt":"ðŸ“„","pdf":"ðŸ“•","jpg":"ðŸ–¼ï¸","jpeg":"ðŸ–¼ï¸","png":"ðŸ–¼ï¸","doc":"ðŸ“˜","docx":"ðŸ“˜","default":"ðŸ“"
};
function getIcon(filename){
  const ext = filename.split('.').pop().toLowerCase();
  return fileIcons[ext] || fileIcons["default"];
}

// ---------- æ¸²æŸ“æ–‡ä»¶å¡ç‰‡ ----------
const filesContainer=document.getElementById("filesContainer");
document.getElementById("who").textContent=user;
USERS[user].files.forEach(f=>{
  const card = document.createElement("div");
  card.className="fileCard";

  const icon = document.createElement("div");
  icon.className="fileIcon";
  icon.textContent = getIcon(f);

  const name = document.createElement("div");
  name.className="fileName";
  name.textContent=f;

  const link = document.createElement("a");
  link.className="fileLink";
  link.href = USERS[user].folder+"/"+encodeURIComponent(f);
  link.target="_blank";
  link.textContent="ä¸‹è½½/æŸ¥çœ‹";

  card.appendChild(icon);
  card.appendChild(name);
  card.appendChild(link);
  filesContainer.appendChild(card);
});

// ---------- ç™»å‡º ----------
document.getElementById("logoutBtn").onclick=function(){
  sessionStorage.removeItem("user");
  window.location.href="login.html";
};
</script>
</body>
</html>
